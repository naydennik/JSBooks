<div class="container" *ngIf="editModel">
  <div class="row space-top">
    <div class="col-md-12">
      <h1>Edit Book</h1>
      <br />
    </div>
  </div>
  <form #b="ngForm" (ngSubmit)="edit()">
    <div class="row space-top">
      <div class="col-md-4">
        <div class="form-group">
          <h4>Title</h4>
          <input
            class="form-control"
            id="new-make"
            type="text"
            required
            name="title"
            [(ngModel)]="editModel.title"
            #title="ngModel"
            pattern="^[A-Z]{1}.+$"
          />
          <div
            class="alert alert-danger"
            *ngIf="title.touched && title.value === ''"
          >
            This field is required!
          </div>
          <div
            class="alert alert-danger"
            *ngIf="title.touched && title.value !== '' && title.invalid"
          >
            The title should start with capital letter and should be at least
            two symbols long!
          </div>
        </div>
        <div class="form-group">
          <h4>Subtitle</h4>
          <input
            class="form-control"
            id="new-model"
            type="text"
            required
            name="subtitle"
            [(ngModel)]="editModel.subtitle"
            #subtitle="ngModel"
            pattern="^[A-Z]{1}.+$"
          />
          <div
            class="alert alert-danger"
            *ngIf="subtitle.touched && subtitle.value === ''"
          >
            This field is required!
          </div>
          <div
            class="alert alert-danger"
            *ngIf="
              subtitle.touched && subtitle.value !== '' && subtitle.invalid
            "
          >
            The subtitle should start with capital letter and should be at least
            two symbols long!
          </div>
        </div>
        <div class="form-group">
          <h4>Author</h4>
          <input
            class="form-control "
            id="new-author"
            type="text"
            required
            name="author"
            [(ngModel)]="editModel.author"
            #author="ngModel"
            pattern="^[A-Z][A-Za-z ,]+$"
          />
          <div
            class="alert alert-danger"
            *ngIf="author.touched && author.value === ''"
          >
            This field is required!
          </div>
          <div
            class="alert alert-danger"
            *ngIf="author.touched && author.value !== '' && author.invalid"
          >
            The author's name should start with capital letter and should be at
            least 2 symbols long!
          </div>
        </div>
        <div class="form-group">
          <h4>Image</h4>
          <input
            class="form-control"
            id="new-image"
            type="text"
            required
            name="imageUrl"
            [(ngModel)]="editModel.imageUrl"
            #imageUrl="ngModel"
          />
          <br />
          <img
            id="img"
            src="{{ imageUrl.value }}"
            alt="{{ editModel.title }}"
          />
          <div
            class="alert alert-danger"
            *ngIf="imageUrl.touched && imageUrl.value === ''"
          >
            This field is required! Please enter a correct URL! If the link is
            correct, you will see a preview of the image.
          </div>
        </div>
        <div class="form-group">
          <h4>Description</h4>
          <textarea
            cols="20"
            rows="10"
            class="form-control"
            id="new-description"
            type="text"
            required
            name="description"
            [(ngModel)]="editModel.description"
            #description="ngModel"
            pattern="^.{10,}$"
          ></textarea>
          <div
            class="alert alert-danger"
            *ngIf="description.touched && description.value === ''"
          >
            This field is required!
          </div>
          <div
            class="alert alert-danger"
            *ngIf="
              description.touched &&
              description.value !== '' &&
              description.invalid
            "
          >
            The description should be more than 10 symbols!
          </div>
        </div>
        <div class="form-group">
          <h4>ISBN</h4>
          <input
            class="form-control"
            id="new-isbn"
            type="text"
            required
            name="isbn"
            [(ngModel)]="editModel.isbn"
            #isbn="ngModel"
            pattern="^[\d]{13}$"
          />
          <div
            class="alert alert-danger"
            *ngIf="isbn.touched && isbn.value === ''"
          >
            This field is required!
          </div>
          <div
            class="alert alert-danger"
            *ngIf="isbn.touched && isbn.value !== '' && isbn.invalid"
          >
            ISBN should contain only digits and should be exactly 13 symbols
            long!
          </div>
        </div>
        <div class="form-group">
          <h4>Publisher</h4>
          <input
            class="form-control"
            id="new-publisher"
            required
            type="text"
            name="publisher"
            [(ngModel)]="editModel.publisher"
            #publisher="ngModel"
            pattern="^.{2,}$"
          />
          <div
            class="alert alert-danger"
            *ngIf="publisher.touched && publisher.value === ''"
          >
            This field is required!
          </div>
          <div
            class="alert alert-danger"
            *ngIf="
              publisher.touched && publisher.value !== '' && publisher.invalid
            "
          >
            The publisher's name should be at least 2 symbols long!
          </div>
        </div>
        <div class="form-group">
          <h4>Published</h4>
          <input
            class="form-control"
            id="new-published"
            type="text"
            required
            name="published"
            [(ngModel)]="editModel.published"
            #published="ngModel"
            pattern="^(19|20)\d\d[- /.](0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])$"
          />
          <div
            class="alert alert-danger"
            *ngIf="published.touched && published.value === ''"
          >
            This field is required!
          </div>
          <div
            class="alert alert-danger"
            *ngIf="
              published.touched && published.value !== '' && published.invalid
            "
          >
            Please enter correct date in the format 'yyyy-mm-dd'!
          </div>
        </div>
        <div class="form-group">
          <h4>Pages</h4>
          <input
            class="form-control"
            id="new-published"
            type="number"
            required
            name="pages"
            [(ngModel)]="editModel.pages"
            #pages="ngModel"
            pattern="^[\d]+$"
          />
          <div
            class="alert alert-danger"
            *ngIf="pages.touched && pages.value === ''"
          >
            This field is required!
          </div>
          <div
            class="alert alert-danger"
            *ngIf="pages.touched && pages.value !== '' && pages.invalid"
          >
            The number of pages should be a number!
          </div>
        </div>
        <div class="form-group">
          <h4>Official Website</h4>
          <input
            class="form-control"
            id="new-website"
            required
            type="url"
            name="website"
            [(ngModel)]="editModel.website"
            #website="ngModel"
          />
          <div
            class="alert alert-danger"
            *ngIf="website.touched && website.invalid"
          >
            This field is required!
          </div>
        </div>
        <input
          type="submit"
          class="btn btn-primary"
          value="Edit"
          [disabled]="b.invalid"
        />
      </div>
    </div>
  </form>
</div>
